---
description: Describes how and where to create Cursor Rules
globs: *.mdc
---
# Cursor Rules Location

Standards for placing and organizing Cursor rule files in the repository, ensuring rules are always up-to-date and follow best practices.

## Rule Details

- **Name:** cursor_rules_location_and_maintenance

- **Description:** Standards for placing and maintaining Cursor rule files in the correct directory

## Filters
- file extension pattern: `\\.mdc$`
  - Match files that look like Cursor rules
- content: `(?s)<rule>.*?</rule>`
  - Match file creation or modification events
- event: `file_create|file_modify`

## Rejections
- Conditions:
  - pattern `^(?!\\.\\/\\.cursor\\/rules\\/.*\\.mdc$)` – Cursor rule files (.mdc) must be placed in the .cursor/rules directory or its subdirectories

## Suggestions
- Guidance:
## Cursor Rules Best Practices

### 1. Location and Structure
- **Location:** Always place rule files in **PROJECT_ROOT/.cursor/rules/**
- **Directory Structure:**
  ```
  PROJECT_ROOT/
  ├── .cursor/
  │   └── rules/
  │       ├── your-rule-name.mdc
  │       ├── security/
  │       │   ├── owasp-rule-1.mdc
  │       │   └── ...
  │       ├── database/
  │       │   ├── sql-standards.mdc
  │       │   └── ...
  │       └── frontend/
  │           ├── react-patterns.mdc
  │           └── ...
  └── ...
  ```

#### Subdirectory Support
Cursor **supports organizing rules into subdirectories** within `.cursor/rules/`. This allows you to:
- Organize rules by category (e.g., `security/`, `database/`, `frontend/`)
- Maintain a cleaner structure for large rule sets
- Group related rules together

**Auto-Discovery:** Cursor automatically discovers and applies rules from subdirectories recursively. Rules in subdirectories work the same as rules in the root `.cursor/rules/` directory.

**Important Considerations:**
- **Submodules/Nested Projects:** Be aware that Cursor may auto-discover rules in submodules or nested project directories. If you have submodules with their own `.cursor/rules/` directories, those rules may be applied to the parent project. Use `.cursorignore` to exclude specific directories if needed.
- **Always Apply Rules:** Rules with `alwaysApply: true` in subdirectories will be applied globally, just like rules in the root directory.
- **Current Installer Limitation:** The current installer (`install.php`) installs all rules to a flat directory structure. If you want to use subdirectories, you'll need to manually organize them after installation or modify the installer.

### 2. Naming Conventions
- Use **kebab-case** for filenames (e.g., `php-drupal-standards.mdc`)
- Always use the **.mdc** extension
- Make names descriptive of the rule's purpose
- Group related rules with common prefixes (e.g., `drupal-*`, `lagoon-*`)

### 3. Rule File Structure
```
---
description: Brief description of the rule
globs: *.php, *.module, *.inc
alwaysApply: false
---
# Rule Title

<rule>
name: rule_name_in_snake_case
description: Detailed description of what the rule enforces
filters:
  - type: file_extension
    pattern: "pattern_to_match"

actions:
  - type: enforce|suggest|validate
    conditions:
      - pattern: "regex_pattern"
        message: "Clear message explaining the issue"

metadata:
  priority: high|medium|low
  version: 1.1
</rule>
```

### 4. Rule Maintenance
- **When adding new rules:**
  - Check for overlapping or conflicting rules
  - Ensure patterns are efficient and specific
  - Test rules against sample code
- **When modifying existing rules:**
  - Update version number
  - Document changes in commit messages
  - Review and update related rules for consistency
  - Consider backward compatibility

### 5. Best Practices for Rule Content
- Use clear, specific regex patterns
- Provide helpful, actionable messages
- Include examples of good and bad code
- Set appropriate priority levels
- Use multiple conditions for complex rules
- Consider performance impact of complex patterns

### 6. Rule Testing
- Test rules against both compliant and non-compliant code
- Verify that messages are clear and helpful
- Check for false positives and false negatives
- Ensure rules don't conflict with each other

## Metadata
- Priority: high|medium|low
- Version: 1.1
- - **When Adding New Rules: **
- - **When Modifying Existing Rules: **
